<nav class="navbar">
</nav>

<div class="container">

  <div class="top-actions">
    <button (click)="openCreate()">Crear Registro De Petici√≥n</button>
  </div>

  <p *ngIf="errorMessage" class="error">
    {{ errorMessage }}
  </p>

  <div class="cards">
    <div class="card" *ngFor="let log of logs">

      <h3>{{ log.httpMethod }} - {{ log.endpoint }}</h3>

      <p><strong>Date:</strong> {{ log.date }}</p>

      <p>
        <strong>Status:</strong>
        <span
          class="status-badge"
          [ngClass]="{
            'success': log.status >= 200 && log.status < 300,
            'error-status': log.status >= 400
          }"
        >
          {{ log.status }}
        </span>
      </p>

      <p><strong>Response:</strong></p>

      <div class="response-box">
        {{ log.response }}
      </div>

      <div class="card-buttons">
        <button (click)="openEdit(log)">Edit</button>
        <button class="danger" (click)="openDelete(log)">Delete</button>
      </div>

    </div>
  </div>

</div>

<!-- CREATE / EDIT MODAL -->
<div class="modal-backdrop" *ngIf="showEditModal || showCreateModal">
  <div class="modal">
    <h2>{{ showCreateModal ? 'Create Log' : 'Edit Log' }}</h2>

    <label>HTTP Method</label>
    <input [(ngModel)]="selectedLog.httpMethod" />

    <label>Endpoint</label>
    <input [(ngModel)]="selectedLog.endpoint" />

    <label>Status</label>
    <input type="number" [(ngModel)]="selectedLog.status" />

    <label>Response</label>
    <textarea [(ngModel)]="selectedLog.response"></textarea>

    <div class="modal-actions">
      <button (click)="showCreateModal ? createLog() : updateLog()">
        Save
      </button>
      <button class="danger" (click)="closeModals()">Cancel</button>
    </div>
  </div>
</div>

<!-- DELETE MODAL -->
<div class="modal-backdrop" *ngIf="showDeleteModal">
  <div class="modal">
    <h2>Confirm Delete</h2>
    <p>Are you sure you want to delete this log?</p>

    <div class="modal-actions">
      <button class="danger" (click)="deleteLog()">Delete</button>
      <button (click)="closeModals()">Cancel</button>
    </div>
  </div>
</div>
