<nav class="navbar">
</nav>

<div class="container">

  <!-- ===== BOTONES SUPERIORES ===== -->
  <div class="buttons">

    <!-- Load Users -->
    <button
      (click)="loadUsers()"
      [disabled]="loadingUsers"
    >
      {{ loadingUsers ? 'Loading Users...' : 'Load Users' }}
    </button>

    <!-- Load All Posts -->
    <button
      (click)="loadAllPosts()"
      [disabled]="loadingPosts"
    >
      {{ loadingPosts ? 'Loading Posts...' : 'View All Posts' }}
    </button>

    <!-- Simulate Error -->
    <button
      (click)="simulateError()"
      [disabled]="loadingUsers || loadingPosts"
    >
      Simulate Error
    </button>

  </div>

  <!-- ===== MENSAJE DE ERROR ===== -->
  <p *ngIf="errorMessage" class="error">
    {{ errorMessage }}
  </p>

  <!-- ===== LISTADO DE USUARIOS ===== -->
  <div class="cards">

    <div class="card" *ngFor="let user of users">

      <h3>{{ user.name }}</h3>

      <p><strong>Username:</strong> {{ user.username }}</p>
      <p><strong>Email:</strong> {{ user.email }}</p>
      <p><strong>City:</strong> {{ user.address.city }}</p>
      <p><strong>Company:</strong> {{ user.company.name }}</p>

      <button
        (click)="loadPostsByUser(user)"
        [disabled]="loadingPosts"
      >
        {{ loadingPosts ? 'Loading...' : 'View Posts' }}
      </button>

    </div>

  </div>

</div>


<!-- ===== MODAL POSTS ===== -->

<div class="modal-backdrop" *ngIf="showModal">
  <div class="modal">

    <span class="close" (click)="closeModal()">Ã—</span>

    <h2>{{ modalTitle }}</h2>

    <div *ngIf="posts.length === 0">
      <p>This user has not published posts.</p>
    </div>

    <div class="card" *ngFor="let post of posts">
      <h4>{{ post.title }}</h4>
      <p>{{ post.body }}</p>
    </div>

  </div>
</div>
